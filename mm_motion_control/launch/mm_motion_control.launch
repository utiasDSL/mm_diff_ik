<?xml version="1.0"?>

<!-- Bring up the UR10 driver and controller node. Ridgeback controller is
     already launched on startup of the Thing. -->

<launch>

  <arg name="robot_ip" default="192.168.131.17"/>
  <arg name="limited" default="false"/>
  <arg name="min_payload"  default="0.0"/>
  <arg name="max_payload"  default="5.0"/>
  <arg name="prefix" default="ur10_arm_" />
  <arg name="servoj_time" default="0.008" /> <!-- 125Hz = controller time step -->
  <arg name="base_frame" default="$(arg prefix)base_link" />
  <arg name="tool_frame" default="palm" />
  <arg name="max_velocity" default="10.0"/> <!-- [rad/s] -->

  <!-- Launch UR driver -->
  <!-- Note we are not using ros_control here since we're boldly rolling our own shit -->
  <node name="ur_hardware_interface" pkg="ur_modern_driver" type="ur_driver" output="screen">
    <param name="robot_ip_address" type="str" value="$(arg robot_ip)"/>
    <param name="min_payload" type="double" value="$(arg min_payload)"/>
    <param name="max_payload" type="double" value="$(arg max_payload)"/>
    <param name="max_velocity" type="double" value="$(arg max_velocity)"/>
    <param name="use_ros_control" type="bool" value="False"/>
    <param name="prefix" value="$(arg prefix)" />
    <remap from="/joint_states" to="/ur10_joint_states" />
  </node>

  <!-- Combine base and arm joint_state messages into a single one. -->
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
    <param name="/use_gui" value="false"/>
    <param name="/rate" value="100"/>
    <rosparam param="/source_list">[/ur10_joint_states, /rb_joint_states]</rosparam>
  </node>

  <!-- Start the controller. -->
  <node pkg="mm_motion_control" type="mm_control_node" name="mm_control_node" />
</launch>
